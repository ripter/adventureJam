<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Adventure Jam</title>
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <script src="bundle.js"></script>
  </head>
  <body>
    <a-scene>
      <a-assets>
        <img id="spriteDeliveryGuy" src="sprites/deliveryGuy.svg"></img>
        <img id="spriteOppenheimer" src="sprites/oppenheimer.svg"></img>
        <img id="spriteSoldier" src="sprites/soldier.svg"></img>
        <img id="spriteBox" src="sprites/box.svg"></img>
        <img id="spriteBoxSideActive" src="sprites/box_active.svg"></img>
        <img id="spriteOrange" src="sprites/orange.svg"></img>
        <img id="spriteCurvepoint" src="sprites/curvePointRed.svg"></img>
        <img id="imgOppie" src="images/Oppie.jpg"></img>
        <img id="imgLose" src="images/Y12_Calutron_Operators.jpg"></img>
        <a-asset-item id="modelTruck" src="models/truck.dae"></a-asset-item>
        <a-asset-item id="modelSet" src="models/level.dae"></a-asset-item>
        <a-asset-item id="modelTable" src="models/table.dae"></a-asset-item>

        <a-mixin id="npc" position="0 .5 0" material="width: 68; height: 100;"></a-mixin>
        <a-mixin id="npcDeliveryGuy" material="src: #spriteDeliveryGuy;"></a-mixin>
        <a-mixin id="npcOppie" material="src: #spriteOppenheimer; width: 65; height: 93;"></a-mixin>
        <a-mixin id="npcSoldier" material="src: #spriteSoldier;"></a-mixin>


        <a-mixin id="sprite" material="transparent:true;flatShading:true;side:double;shader:flat;" geometry="primitive:plane"></a-mixin>
        <a-mixin id="art" material="transparent:true;flatShading:true;" geometry="primitive:plane"></a-mixin>
        <a-mixin id="itemBox" geometry="primitive: box; height: .75; width: .75; depth: .75;" material="src: #spriteBoxSideActive; shader: flat;"></a-mixin>
        <a-mixin id="curvePoint" visible="false" material="color: #ff5342;flatShading:true;" geometry="primitive: cone; radiusBottom: .75; radiusTop: 0.1;"></a-mixin>
      </a-assets>

      <!-- Level -->
      <a-entity>
        <a-camera active-camera="level"
          active="false"
          user-height="1.6"
          position="-6 0 9"
          rotation="1.6 -25 0"
          look-controls>
          <a-entity id="cursor"
            cursor="fuse: true; fuseTimeout: 1500;"
            position="0 0 -1"
            geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
            material="color: black; shader: flat">
          </a-entity>
        </a-camera>

        <!-- Oppie aka the game timer
          Time: 5min (300000ms)
                1min (60000ms)
                20sec (20000ms)
        -->
        <a-entity position="0 .5 0">
          <a-entity id="oppie" mixin="sprite npc npcOppie"  alongpath="curve: #trackOppie; dur: 20000; delay: 0; isPlaying: false;"></a-entity>
          <a-curve id="trackOppie">
            <a-curve-point mixin="curvePoint" position="-5.8 0 3.236"></a-curve-point>
            <a-curve-point mixin="curvePoint" position="-7.832 0 5.415"></a-curve-point>
            <a-curve-point mixin="curvePoint" position="-5.006 0 6.679"></a-curve-point>
            <a-curve-point mixin="curvePoint" position="-2.21 0 6.76"></a-curve-point>
            <a-curve-point mixin="curvePoint" position="-2.21 0 8.342"></a-curve-point>
            <a-curve-point mixin="curvePoint" position="0.906 0 8.38"></a-curve-point>
            <a-curve-point mixin="curvePoint" position="0.951 0 6.583"></a-curve-point>
            <a-curve-point mixin="curvePoint" position="4.384 0 6.583"></a-curve-point>
            <a-curve-point mixin="curvePoint" position="4.384 0 3.469"></a-curve-point>
            <a-curve-point mixin="curvePoint" position="-0.307 0 3.469"></a-curve-point>
            <a-curve-point mixin="curvePoint" position="-5.358 0 3.469"></a-curve-point>
            <a-curve-point mixin="curvePoint" position="-9.79 0 3.469"></a-curve-point>
            <a-curve-point mixin="curvePoint" position="-9.79 0 9.073" class="a-curve-point" event-to-action="events:alongpath-trigger-activated;actions:endGame"></a-curve-point>
          </a-curve>

          <!-- Orange Table -->
          <a-entity class="clickable" collada-model="#modelTable" position="-10 -1 9" event-to-action="actions:touchTable;"></a-entity>

          <a-entity position="-0.056 -0.5 2.098" mixin="itemBox" event-to-action="actions:touchDelivery;"></a-entity>
          <a-entity position="-0.5 -0.433 2">
            <a-entity id="rollingOrange" alongpath="curve: #trackOrangeDelivery; dur: 2000; delay: 0; isPlaying:false;" mixin="sprite" material="src:#spriteOrange"></a-entity>
            <a-curve id="trackOrangeDelivery">
              <a-curve-point mixin="curvePoint" position="0 0 0"></a-curve-point>
              <a-curve-point mixin="curvePoint" position="-1.76 0.17 2.745"></a-curve-point>
            </a-curve>
          </a-entity>
        </a-entity>

        <!-- Truck -->
        <a-entity event-to-action="actions:touchTruck">
          <a-entity collada-model="#modelTruck" position="4.5 0 -5" scale=".5 .5 .5" rotation="0 90 0"></a-entity>
          <a-entity mixin="itemBox" position="1.409 0.754 -2.387"></a-entity>
          <a-entity mixin="itemBox" position="2.157 1.165 -2.396"></a-entity>
          <a-entity mixin="itemBox" position="1.749 1.018 -3.147"></a-entity>
        </a-entity>
        <!-- NPC and box being carried -->
        <a-entity id="deliveryGuy" actor-delivery-driver="events:alongpath-trigger-activated;" alongpath="curve: #track1; dur: 4000; delay: 1500; loop: true; isReversing: true;">
          <a-entity mixin="sprite npc npcDeliveryGuy"></a-entity>
          <a-entity class="inventory" mixin="itemBox" position="0.571 0.33 0.375" visible="false"></a-entity>
        </a-entity>
        <!-- Path from Truck to boxes -->
        <a-curve id="track1">
          <a-curve-point class="a-curve-point" mixin="curvePoint" position="-0.158 0 -3" event-to-action="events:alongpath-trigger-activated;actions:deliveryPickup"></a-curve-point>
          <a-curve-point mixin="curvePoint" position="-1.76 0.17 -1.275"></a-curve-point>
          <a-curve-point class="a-curve-point" mixin="curvePoint" position="-0.056 0.17 2.098" class="a-curve-point" event-to-action="events:alongpath-trigger-activated;actions:deliveryDropoff;"></a-curve-point>
        </a-curve>


        <!-- Solider Paths -->
        <a-entity>
          <a-entity id="soldier" mixin="sprite npc npcSoldier" position="3.865 0.5 4.566"></a-entity>
        </a-entity>

        <!-- Set: Static Items like Walls and tables -->
        <a-entity collada-model="#modelSet" rotation="0 -90 0" position=".5 -1 2"></a-entity>
        <a-entity position="0 -.5 0" material="color:#C2DB92;shader:flat;" geometry="primitive: plane; height: 40; width: 40;"  rotation="-90 0 0"></a-entity>
      </a-enity>



      <!-- Screens -->
      <a-entity position="-4 -7 0" rotation="90 0 0" material="shader:flat;color:#000" geometry="primitive:plane;height:80;width:80"></a-entity>

      <!-- Intro -->
      <a-entity id="screenIntro" position="-23 -7 23" rotation="90 0 0">
        <a-camera active-camera="intro" position="-2 0 8" active="true" user-height="1.6" rotation="-1 0 0">
          <a-entity id="cursor"
            cursor="fuse: true; fuseTimeout: 1500;"
            position="0 0 -1"
            geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
            material="color: #FF00FC; shader: flat">
          </a-entity>
        </a-camera>
        <a-entity position="-7.388 1.31 1" mixin="art" material="src:#imgOppie; npot:true;" geometry="height:10;width:10" event-to-action="actions:completeIntro;"></a-entity>
        <a-entity position="3 1 1" scale="10 10 10" text="value:The Los Alamos Laboratory, was a secret laboratory established by the Manhattan Project during World War II. Its mission was to design and build the first atomic bombs. Robert Oppenheimer was its first director, from 1943 to December 1945."></a-entity>
        <a-entity position="3 -1 1" scale="10 10 10" text="value:In July 1944, Oppenheimer abandoned the gun design in favor of an implosion-type weapon."></a-entity>
        <a-entity position="3 -2 1" scale="10 10 10" text="color:#fff;value:He was inspired by an orange."></a-entity>

        <a-entity position="3 -3 1" scale="10 10 10" text="value:Long Look on Oppenheimer to start."></a-entity>
        <a-entity position="3 -3.5 1" scale="10 10 10" text="value:DESTOP: click and drag to look around."></a-entity>

        <a-entity position="2 4 1" mixin="art" material="src:#spriteOrange"></a-entity>
        <a-entity position="0 4 1" scale="2 2 2" mixin="art" material="src:#spriteOppenheimer" event-to-action="actions:completeIntro;"></a-entity>
      </a-entity>


      <!-- Game Lose -->
      <a-entity id="screenLose" position="4 -7 0" rotation="90 0 0">
        <a-camera active-camera="lose" position="0 0 8" active="false" user-height="1.6" rotation="-1 0 0">
          <a-entity id="cursor"
            cursor="fuse: true; fuseTimeout: 1500;"
            position="0 0 -1"
            geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
            material="color: #FF00FC; shader: flat">
          </a-entity>
        </a-camera>
        <a-entity position="-6 1.5 1" mixin="art" material="src:#imgLose;" geometry="height:10;width:10"></a-entity>
        <a-entity position="5 2.5 1" scale="10 10 10" text="value:Oh No! You changed history! Game Over"></a-entity>
        <a-entity position="5 1 1" scale="10 10 10" text="value:How to play"></a-entity>
        <a-entity position="5 0 1" scale="10 10 10" text="value:Click on things."></a-entity>
        <a-entity position="5 -1 1" scale="10 10 10" text="value:Look Around. (VR CardBoard/Desktop Mouse)"></a-entity>
        <a-entity position="5 -2 1" scale="10 10 10" text="value:Get an orange on the table before Oppenheimer reaches it."></a-entity>

        <a-entity position="4.837 -3.15 1" scale="10 10 10" text="value:Click or Long Look on Oppenheimer to re-start"></a-entity>
        <a-entity position="1 4 1" scale="2 2 2" mixin="art" material="src:#spriteOppenheimer" event-to-action="actions:restartGame;"></a-entity>
      </a-entity>

    </a-scene>
  </body>
</html>
